package org.opentestsystem.ap.migration.contentupdater;

import org.opentestsystem.ap.common.model.MiItem;
import org.opentestsystem.ap.common.model.content.MiItemContent;

import static org.opentestsystem.ap.common.model.ModelConstants.ItemLanguage.LANG_ESN;

public class MiContentUpdater extends AbstractContentUpdater<MiItem> {

    @Override
    protected boolean updateEnglishContent(MiItem item, ContentUpdateCommand updateCommand) {
        MiItemContent content = item.getCore().getEn();
        content.setPrompt(updateCommand.applyEnglishContentUpdate(content.getPrompt()));
        this.updateEnglishTable(content.getTable(), updateCommand, LABELS_ONLY);

        return true;
    }

    @Override
    protected boolean updateSpanishContent(MiItem item, ContentUpdateCommand updateCommand) {
        MiItemContent english = item.getCore().getEn();
        MiItemContent spanish = item.getTranslations().getEsp();

        spanish.setPrompt(updateCommand.applyTranslatedContentUpdate(LANG_ESN, spanish.getPrompt(), english.getPrompt()));

        this.updateSpanishTableColumns(
            spanish.getTable().getColumns(), english.getTable().getColumns(), updateCommand);

        this.updateSpanishTableRows(
            spanish.getTable().getRows(), english.getTable().getRows(), updateCommand, LABELS_ONLY);

        return true;
    }
}
