package org.opentestsystem.ap.migration.contentupdater;

import org.opentestsystem.ap.common.model.GiItem;
import org.opentestsystem.ap.common.model.content.GiItemContent;

import static org.opentestsystem.ap.common.model.ModelConstants.ItemLanguage.LANG_ESN;

public class GiContentUpdater extends AbstractContentUpdater<GiItem> {

    @Override
    protected boolean updateEnglishContent(GiItem item, ContentUpdateCommand updateCommand) {
        GiItemContent englishContent = item.getCore().getEn();
        englishContent.setPrompt(updateCommand.applyEnglishContentUpdate(englishContent.getPrompt()));

        item.getCore().getScoring().setRubric(
            updateCommand.applyEnglishContentUpdate(item.getCore().getScoring().getRubric()));

        return true;
    }

    @Override
    protected boolean updateSpanishContent(GiItem item, ContentUpdateCommand updateCommand) {
        GiItemContent englishContent = item.getCore().getEn();
        GiItemContent spanishContent = item.getTranslations().getEsp();

        spanishContent.setPrompt(
            updateCommand.applyTranslatedContentUpdate(
                LANG_ESN,
                spanishContent.getPrompt(),
                englishContent.getPrompt()
            )
        );

        return true;
    }
}
