package org.opentestsystem.ap.migration.contentupdater;

import org.opentestsystem.ap.common.model.GiItem;
import org.opentestsystem.ap.common.model.content.GiItemContent;

import static org.opentestsystem.ap.common.model.ItemConstants.ItemLanguage.LANG_ESN;

public class GiContentUpdater extends AbstractContentUpdater<GiItem> {

    @Override
    protected void updateEnglishContent(GiItem item, ContentUpdateCommand updateCommand) {
        GiItemContent englishContent = item.getCore().getEn();
        englishContent.setPrompt(updateCommand.applyContentUpdate(englishContent.getPrompt()));

        item.getCore().getScoring().setRubric(
            updateCommand.applyContentUpdate(item.getCore().getScoring().getRubric()));
    }

    @Override
    protected void updateSpanishContent(GiItem item, ContentUpdateCommand updateCommand) {
        GiItemContent englishContent = item.getCore().getEn();
        GiItemContent spanishContent = item.getTranslations().getEsp();

        spanishContent.setPrompt(
            updateCommand.applyContentUpdate(
                LANG_ESN,
                spanishContent.getPrompt(),
                englishContent.getPrompt()
            )
        );
    }
}
