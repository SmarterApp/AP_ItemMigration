package org.opentestsystem.ap.migration.contentupdater;

import org.opentestsystem.ap.common.model.StimItem;
import org.opentestsystem.ap.common.model.content.StimItemContent;

import static org.opentestsystem.ap.common.model.ModelConstants.ItemLanguage.LANG_ESN;

public class StimContentUpdater extends AbstractContentUpdater<StimItem> {

    @Override
    protected boolean updateEnglishContent(StimItem item, ContentUpdateCommand updateCommand) {
        StimItemContent content = item.getCore().getEn();

        ContentUpdateCommandResult commandResult = updateCommand.applyEnglishContentUpdate(content.getContent());
        content.setContent(commandResult.getUpdatedContent());

        return commandResult.isContentChanged();
    }

    @Override
    protected boolean updateSpanishContent(StimItem item, ContentUpdateCommand updateCommand) {
        StimItemContent english = item.getCore().getEn();
        StimItemContent spanish = item.getTranslations().getEsp();

        ContentUpdateCommandResult commandResult =
                updateCommand.applyTranslatedContentUpdate(LANG_ESN, spanish.getContent(), english.getContent());
        spanish.setContent(commandResult.getUpdatedContent());

        return commandResult.isContentChanged();
    }
}
