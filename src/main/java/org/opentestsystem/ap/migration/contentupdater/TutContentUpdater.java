package org.opentestsystem.ap.migration.contentupdater;

import org.opentestsystem.ap.common.model.TutItem;
import org.opentestsystem.ap.common.model.content.TutItemContent;

import static org.opentestsystem.ap.common.model.ModelConstants.ItemLanguage.LANG_ESN;

public class TutContentUpdater extends AbstractContentUpdater<TutItem> {

    @Override
    protected boolean updateEnglishContent(TutItem item, ContentUpdateCommand updateCommand) {
        TutItemContent content = item.getCore().getEn();

        ContentUpdateCommandResult commandResult = updateCommand.applyEnglishContentUpdate(content.getContent());
        content.setContent(commandResult.getUpdatedContent());

        return commandResult.isContentChanged();
    }

    protected boolean updateSpanishContent(TutItem item, ContentUpdateCommand updateCommand) {
        TutItemContent english = item.getCore().getEn();
        TutItemContent spanish = item.getTranslations().getEsp();

        ContentUpdateCommandResult commandResult =
                updateCommand.applyTranslatedContentUpdate(LANG_ESN, spanish.getContent(), english.getContent());
        spanish.setContent(commandResult.getUpdatedContent());

        return commandResult.isContentChanged();
    }
}
