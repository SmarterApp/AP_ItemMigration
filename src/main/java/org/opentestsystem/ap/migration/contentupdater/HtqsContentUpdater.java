package org.opentestsystem.ap.migration.contentupdater;

import org.opentestsystem.ap.common.model.HtqsItem;
import org.opentestsystem.ap.common.model.Item;
import org.opentestsystem.ap.common.model.content.HtqsItemContent;

public class HtqsContentUpdater implements ContentUpdater {
    @Override
    public void updateContent(Item item,
                              ContentUpdateCommand contentUpdateCommand) {
        HtqsItem htqsItem = (HtqsItem) item;
        updateItemContent(htqsItem.getCore().getEn(), contentUpdateCommand);
        updateItemContent(htqsItem.getTranslations().getEsp(), contentUpdateCommand);
    }

    private void updateItemContent(HtqsItemContent content,
                                   ContentUpdateCommand updateCommand) {
        content.setPrompt(updateCommand.applyContentUpdate(content.getPrompt()));
        content.getHtqSelectable().setInteractiveText(
                updateCommand.applyContentUpdate(content.getHtqSelectable().getInteractiveText())
        );
    }
}
