package org.opentestsystem.ap.migration.migration;

import lombok.extern.slf4j.Slf4j;
import org.opentestsystem.ap.common.client.GitClient;
import org.opentestsystem.ap.common.model.Item;
import org.opentestsystem.ap.migration.model.BranchInfo;
import org.opentestsystem.ap.migration.model.ItemInfo;
import org.opentestsystem.ap.migration.model.MigrationDefinition;
import org.opentestsystem.ap.migration.util.Util;
import org.springframework.stereotype.Component;

@Slf4j
@Component
public class Migration1826 extends AbstractMigration {

    public Migration1826(Util util) {
        super(util);
    }

    @Override
    protected void runMigration(final ItemInfo itemInfo,
                                final BranchInfo branchInfo,
                                final MigrationDefinition migration,
                                final GitClient gitClient) {

        String itemId = itemInfo.getItemId();
        String branchName = branchInfo.getBranchName();

        Item item = itemRepository.loadItemRemotely(itemId, branchName);

        gitClient.updateItem(item, branchName, migration.getMigrationDescription());


    }
}
