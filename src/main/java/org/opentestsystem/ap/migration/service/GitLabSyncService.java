package org.opentestsystem.ap.migration.service;

import lombok.extern.slf4j.Slf4j;
import org.opentestsystem.ap.common.security.model.ItemBankSystemUser;
import org.opentestsystem.ap.migration.gitlab.GitLabSyncManager;
import org.springframework.stereotype.Component;

import java.util.Collections;

/**
 * Sync an item from GitLab into the data store.  This service is not an import service meaning it does not import SAAIF
 * converting it to the IAT model.  The item in GitLab is expected to have item.json.  The idea being taking
 * an already imported item from production and putting it in a local dev environment to debug.
 */
@Slf4j
@Component
public class GitLabSyncService {

    private static final ItemBankSystemUser user = new ItemBankSystemUser("hal@fairwaytech.com", "Hal Jordan");

    private final GitLabSyncManager syncManager;

    public GitLabSyncService(GitLabSyncManager syncManager) {
        this.syncManager = syncManager;
    }

    public void syncGitLabToDataStore(String itemId) {
        this.syncManager.syncToDataStore(user, itemId, Collections.emptyList());
    }
}
