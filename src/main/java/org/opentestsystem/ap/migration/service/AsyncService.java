package org.opentestsystem.ap.migration.service;

import lombok.extern.slf4j.Slf4j;
import org.opentestsystem.ap.migration.model.MigrationItemResult;
import org.springframework.scheduling.annotation.Async;
import org.springframework.stereotype.Component;

import java.util.concurrent.CompletableFuture;

@Slf4j
@Component
public class AsyncService {

    private final MigrationItemHandler migrationItemHandler;

    public AsyncService(MigrationItemHandler migrationItemHandler) {
        this.migrationItemHandler = migrationItemHandler;
    }

    @Async
    public CompletableFuture<MigrationItemResult> migrateDataStoreItemsAsync(final String itemId) {
        return CompletableFuture.completedFuture(migrationItemHandler.migrate(itemId));
    }
}
