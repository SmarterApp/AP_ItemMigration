package org.opentestsystem.ap.migration.model.v0;

import java.util.ArrayList;
import java.util.List;

import com.fasterxml.jackson.annotation.JsonProperty;
import lombok.Data;

@Data
public class ItemAudioResource {

    @JsonProperty("id")
    private String id;

    @JsonProperty("transcriptFile")
    private Attachment transcriptFile = new Attachment();

    @JsonProperty("productionFiles")
    private List<Attachment> productionFiles = new ArrayList<>(0);

    @JsonProperty("isProductionFilesProvided")
    private boolean productionFilesProvided = false;

    public void setTranscriptFile(Attachment transcriptFile) {
        if (transcriptFile == null) {
            this.transcriptFile = new Attachment();
        } else {
            this.transcriptFile = transcriptFile;
        }
    }

    public void setProductionFiles(final List<Attachment> attachment) {
        this.productionFiles.clear();
        if (attachment != null) {
            this.productionFiles.addAll(attachment);
        }
    }

    public boolean containsFile(final String fileName) {
        return fileName.equals(transcriptFile.getFileName())
            || productionFiles.stream().anyMatch(x -> x.getFileName().equals(fileName));
    }

}
