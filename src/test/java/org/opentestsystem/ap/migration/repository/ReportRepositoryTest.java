package org.opentestsystem.ap.migration.repository;

import java.util.HashMap;
import java.util.Map;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.runners.MockitoJUnitRunner;
import org.opentestsystem.ap.common.assembler.StringAssembler;
import org.opentestsystem.ap.migration.TestUtil;
import org.opentestsystem.ap.migration.model.MigrationReport;

import static org.opentestsystem.ap.migration.repository.ReportRepository.REPORT_TEMPLATE;

@RunWith(MockitoJUnitRunner.class)
public class ReportRepositoryTest {

    private TestUtil testUtil;

    private StringAssembler reportAssembler;

    @Before
    public void setup() {
        testUtil = new TestUtil();
        reportAssembler = testUtil.newReportAssembler();
    }

    @Test
    public void itShouldGenerateReport() throws InterruptedException {
        final MigrationReport report = testUtil.newMigrationReport();

        final Map<String, Object> input = new HashMap<>();
        input.put("report", report);

        final String reportString = reportAssembler.generate(REPORT_TEMPLATE, input);
        System.out.println(reportString);
    }


}
